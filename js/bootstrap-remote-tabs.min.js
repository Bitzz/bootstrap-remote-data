var $=jQuery;
/*
 *
 * Bootstrap remote data tabs plugin
 * Version 1.1.1
 *
 * Author: Stephen Hoogendijk (TheCodeAssassin)
 *
 * Licensed under the GPLV2 license.
 *
 * @returns {{hasLoadingMask: boolean, load: Function, _executeRemoteCall: Function}}
 * @constructor
 */
var hasLoadingMask=(jQuery().mask?true:false),bootstrapVersion2=(jQuery().typeahead?true:false);var tabShowEvent=(bootstrapVersion2?"show":"show.bs.tab");var accordionShowEvent=(bootstrapVersion2?"show":"show.bs.collapse");$(function(){var c=document.location.hash;if(c){var a=$(".nav-tabs a[href*="+c+"]");if(a){a.tab(tabShowEvent)}var b=$(".accordion-heading a[href*="+c+"]");if(b){b.collapse(accordionShowEvent)}}});var RemoteTabs=function(){var a={hasLoadingMask:false,load:function(c){var b=this;b.hasLoadingMask=!!c;$("[data-toggle=tab], [data-toggle=collapse]").each(function(h,g){var d=$(g),l,o,j,e,m,f,i=false;if(d.is("[data-tab-url]")){e=d.attr("data-tab-url");l=$("#"+d.attr("href").split("#")[1]);o=d.attr("data-tab-json")||[];j=d.attr("data-tab-callback")||null;m=d.attr("data-tab-delay")||null;f=(d.is("[data-tab-always-refresh]")&&d.attr("data-tab-always-refresh")=="true")||null,showEvent=(d.attr("data-toggle")=="tab"?tabShowEvent:accordionShowEvent);if(o.length>0){try{o=$.parseJSON(o)}catch(n){console.log("Invalid json passed to data-tab-json");console.log(n)}}if(showEvent==accordionShowEvent){i=l.hasClass("in");if(bootstrapVersion2){d=d.parent()}else{d=d.parents(".panel")}if(i){b._triggerChange(null,e,o,j,d,l,m,f)}}d.on(showEvent,function(k){b._triggerChange(k,e,o,j,d,l,m,f)})}})},_triggerChange:function(f,c,k,g,b,i,j,d){var h=this;if(f&&f.target.hash!="undefined"){window.location.hash=f.target.hash}if((!b.hasClass("loaded")||d)&&!b.hasClass("loading")){if(h.hasLoadingMask){i.mask("Loading...")}b.addClass("loading");if(j){clearTimeout(window.timer);window.timer=setTimeout(function(){h._executeRemoteCall(c,k,g,b,i)},j)}else{h._executeRemoteCall(c,k,g,b,i)}}},_executeRemoteCall:function(e,g,c,d,b){var f=this;$.ajax({url:e,data:g||[],success:function(h){d.removeClass("loading");if(f.hasLoadingMask){b.unmask()}if(h){if(typeof window[c]=="function"){window[c].call(null,h,d,b,g)}if(!d.hasClass("loaded")){d.addClass("loaded")}b.html(h)}},error:function(j,h,i){b.html("An error occured while loading the data: "+i);d.removeClass("loading");if(f.hasLoadingMask){b.unmask()}}})}};a.load(hasLoadingMask);return a};var remoteTabsPluginLoaded=new RemoteTabs();